{"version":3,"sources":["../src/camundaAPI.js"],"names":["utils","post","url","param","json","Promise","resolve","reject","xhr","XMLHttpRequest","open","onreadystatechange","handleResponse","setRequestHeader","onerror","e","send","readyState","status","responseText","postMsg","line","data","site","area","toSend","messageName","processVariables","_requestContext","value","JSON","stringify","type","_currentLine","camundaRestApi","then","alert","catch"],"mappings":";;;;;;;;AAAYA,W;;;AAENC,U,GAAO,SAAPA,IAAO,CAACC,GAAD,EAAMC,KAAN,EAAaC,IAAb,EAAsB;AACjC,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,cAAIC,MAAM,IAAIC,cAAJ,EAAV;AACAD,cAAIE,IAAJ,CAAS,MAAT,EAAiBR,MAAMC,KAAvB;AACAK,cAAIG,kBAAJ,GAAyBC,cAAzB;AACAJ,cAAIK,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;AACAL,cAAIM,OAAJ,GAAc;AAAA,mBAAKP,OAAOQ,CAAP,CAAL;AAAA,WAAd;AACAP,cAAIQ,IAAJ,CAASZ,IAAT;;AAEA,mBAASQ,cAAT,GAA2B;AACzB,gBAAIJ,IAAIS,UAAJ,KAAmB,CAAvB,EAA0B;AACxB,kBAAIT,IAAIU,MAAJ,GAAa,GAAb,IAAoBV,IAAIU,MAAJ,IAAc,GAAtC,EAA2C;AACzCZ,wBAAQE,IAAIW,YAAZ;AACD,eAFD,MAEO;AACLZ,uBAAOC,IAAIW,YAAX;AACD;AACF;AACF;AACF,SAjBM,CAAP;AAkBD,O;;yBAEYC,O,GAAU,SAAVA,OAAU,OAAQ;AAC7B,YAAMC,OAAOC,KAAKC,IAAL,GAAY,KAAZ,GAAoBD,KAAKE,IAAzB,GAAgC,KAAhC,GAAwCF,KAAKD,IAA1D;AACA,YAAMI,SAAS;AACbC,uBAAc,oBADD;AAEbC,4BAAmB;AACjBC,6BAAkB,EAACC,OAAOC,KAAKC,SAAL,CAAeT,IAAf,CAAR,EAA8BU,MAAM,QAApC,EADD;AAEjBC,0BAAe,EAACJ,OAAOR,IAAR,EAAcW,MAAM,QAApB;AAFE;AAFN,SAAf;;AAQA/B,aAAKD,MAAMkC,cAAX,EAA2B,SAA3B,EAAsCJ,KAAKC,SAAL,CAAeN,MAAf,CAAtC,EAA8DU,IAA9D,CAAmE,eAAO;AACxEnC,gBAAMoC,KAAN,CAAY,SAAZ,EAAuB,YAAvB,EAAqC,gDAArC;AACD,SAFD,EAEGC,KAFH,CAES,aAAK;AACZrC,gBAAMoC,KAAN,CAAY,OAAZ,EAAqB,OAArB,EAA8B,kDAAkDrB,CAAlD,GAAsD,qBAApF;AACD,SAJD;AAKD,O","file":"camundaAPI.js","sourcesContent":["import * as utils from './utils'\n\nconst post = (url, param, json) => {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open('POST', url + param)\n    xhr.onreadystatechange = handleResponse\n    xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n    xhr.onerror = e => reject(e)\n    xhr.send(json)\n\n    function handleResponse () {\n      if (xhr.readyState === 4) {\n        if (xhr.status < 300 && xhr.status >= 200) {\n          resolve(xhr.responseText)\n        } else {\n          reject(xhr.responseText)\n        }\n      }\n    }\n  })\n}\n\nexport const postMsg = data => {\n  const line = data.site + ' | ' + data.area + ' | ' + data.line\n  const toSend = {\n    messageName : \"maintenanceRequest\",\n    processVariables : {\n      _requestContext : {value: JSON.stringify(data), type: 'String'},\n      _currentLine : {value: line, type: 'String'}\n    }\n  }\n\n  post(utils.camundaRestApi, 'message', JSON.stringify(toSend)).then(res => {\n    utils.alert('success', 'Successful', 'Maintenance request has been successfully sent')\n  }).catch(e => {\n    utils.alert('error', 'Error', \"Maintenance request hasn't been sent due to '\" + e + \"', please try agian\")\n  })\n}"]}